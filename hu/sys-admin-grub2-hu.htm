<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>aptosid Manuals - Grub2</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style type="text/css" media="all">@import url("../lib/css-js/content.css");</style>
        <style type="text/css" media="all">@import url("../lib/css-js/menu.css");</style>
        <style type="text/css" media="print">@import url("../lib/css-js/print.css");</style>
        <link rel ="shortcut icon" href="../lib/favicon/manual.ico" />
        <script type="text/javascript" src="../lib/css-js/menu2.js"></script>
        <!--[if lt IE 8]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-7_override.css">
        <![endif]-->
        <!--[if lt IE 7]>
        <link rel="stylesheet" type="text/css" href="../lib/css-js/ie_5-6_override.css">
        <![endif]-->
</head>
<body>
<!-- Last translation revision by bluewater 22/04/2009 1350hrs UTC -->
<div id="menu"> <!-- menu starts here hu lang maintained by mrowl ruess-->
<!--aptosid Operating System Manual menu-version-00.00.2010.08.14 -->
<!-- menu last updated by bluewater 2010.08.14 0100 hrs UTC -->
	<div id="menu-header">
	      <a href="http://aptosid.com/"><img src="../lib/logos/manual-aptosid-logo.png" title="To aptosid.com forums and wiki" alt="aptosid.com logo" /></a>
	</div>
	<ul id="top-list">
		<li><a href="manual-search-hu.htm#search-on"><img src="../lib/logos/manual-search-22x22.png" title="Search Manual" alt="Search" /> Keresés Online Offline</a> </li>
		<!--<li><a href="http://manual.aptosid.com/meta-manual">Community Software Selections</a></li>-->
	</ul>
	<div id="flags-2">
			<a href="../flag-index.html"><img src="../lib/logos/aptosid-lang-100x64.png" title="Másik nyelv kiválasztása" alt="lang-switch" /></a>
	</div>
	<ul>
<li onmouseover="showHide( 1 );" onmouseout="startTime();" ><a href="welcome-hu.htm">aptosid OS Manual</a>
			<ul class="sub-menu" id="sm1">
				<li><a href="welcome-hu.htm#welcome-gen">aptosid OS Manual &#8658;</a>
					<ul class="sub2-menu" id="sm1a">
					  <li><a href="credits-hu.htm#cred-team">Credits</a></li>
					</ul>
					</li>
		<li><a href="welcome-hu.htm#how-to">How to use this manual &#8658;</a>
					<ul class="sub2-menu" id="sm1b">
					  <li><a href="welcome-hu.htm#how-to">How to use this manual</a></li>
					  <li><a href="welcome-hu.htm#table-contents">Table of Contents</a></li>
					</ul>
					</li>
		<li><a href="help-hu.htm#help-gen">Getting Help &#8658;</a>
					<ul class="sub2-menu" id="sm1c">
					  <li><a href="help-hu.htm#help-gen">Where and how to get help</a></li>
					  <li><a href="help-hu.htm#paste">IRC !paste</a></li>
					</ul>
					</li>
		<li><a href="wel-quickstart-hu.htm#welcome-quick">aptosid Quick Start Guide</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 2 );" onmouseout="startTime();" ><a href="cd-dl-burning-hu.htm">ISO Content, Releases, Download Mirrors and Burning</a>
			   <ul class="sub-menu" id="sm2">
				<li><a href="cd-content-hu.htm#cd-content">ISO Content and system requirements &#8658;</a>
					<ul class="sub2-menu" id="sm2a">
					  <li><a href="sys-admin-release-hu.htm#rolling">Release Notes</a></li>
					</ul>
					</li>
		    <li><a href="cd-dl-burning-hu.htm#download-aptosid">aptosid Mirrors, Downloading and Burning &#8658;</a>
				<ul class="sub2-menu" id="sm2b">
					  <li><a href="cd-dl-burning-hu.htm#md5">md5 Checksum</a></li>
					  <li><a href="cd-dl-burning-hu.htm#burn-nero">Burning in Windows</a></li>
					  <li><a href="cd-dl-burning-hu.htm#burn-linux">Burning in Linux</a></li>
					  <li><a href="cd-no-gui-burn-hu.htm#burning-no-gui">burniso script</a></li>
					  <li><a href="cd-no-gui-burn-hu.htm#burn-no-gui-gen">Burning without a GUI</a></li><li><a href="cd-dl-burning-hu.htm#download-aptosid">aptosid Download Mirrors</a></li>
					</ul>
					</li>
		      </ul>
		</li>
<li  onmouseover="showHide( 3 );" onmouseout="startTime();" ><a href="live-mode-hu.htm">Live Mode</a>
			<ul class="sub-menu" id="sm3">
				<li><a href="live-mode-hu.htm#rootpw">Root-password on the aptosid-Live ISO</a></li>
				<li><a href="live-mode-hu.htm#live-cd-installsoft">Installing software whilst on a Live-ISO</a></li>
			</ul>
		</li>
<li  onmouseover="showHide( 4 );" onmouseout="startTime();" ><a href="term-konsole-hu.htm">The Terminal / Konsole</a>
			<ul class="sub-menu" id="sm4">
				<li><a href="term-konsole-hu.htm#term-kon"> Terminal / Konsole &#8658;</a>
					<ul class="sub2-menu" id="sm4a">
					  <li><a href="term-konsole-hu.htm#term-kon"> Terminal / Konsole</a></li>
					  <li><a href="term-konsole-hu.htm#cli-help">Command Line Help</a></li>
					  <li><a href="help-hu.htm#init3-tools">Tools to know in text mode (tty) - init 3</a></li>
					  <li><a href="term-konsole-hu.htm#term-cmds">Linux Terminal Commands List</a></li>
					</ul>
					</li>
			  <li><a href="term-konsole-hu.htm#sux"> sux / sudo</a></li>
		    </ul>
		</li>
<li  onmouseover="showHide( 5 );" onmouseout="startTime();" ><a href="cheatcodes-hu.htm">CheatCodes</a>
			<ul class="sub-menu" id="sm5">
				<li><a href="cheatcodes-hu.htm#cheatcodes">aptosid specific Live-ISO Cheatcodes</a></li>
				<li><a href="cheatcodes-hu.htm#cheatcodes-linux">Linux generic Cheatcodes</a></li>
				<li><a href="cheatcodes-vga-hu.htm#vga">VGA Codes</a></li>
			</ul>
		</li>
<li  onmouseover="showHide( 6 );" onmouseout="startTime();" ><a href="part-gparted-hu.htm">Partitioning Your Hard Drive</a>
		<ul class="sub-menu" id="sm6">
			<li><a href="part-gparted-hu.htm#partition">Partitioning with a GUI &#8658;</a>
					<ul class="sub2-menu" id="sm6a">
					  <li><a href="part-gparted-hu.htm#partition">Partitioning your HD using GParted / KDE Partition Manager</a></li>
					  <li><a href="part-gparted-hu.htm#ntfs">NTFS partition Resizing using GParted / KDE Partition Manager</a></li>
					</ul>
					</li>
		<li><a href="part-cfdisk-hu.htm#partition">Partitioning with CLI &#8658;</a>
					 <ul class="sub2-menu" id="sm6b">
					    <li><a href="part-cfdisk-hu.htm#partition">Partitioning  your HD using cfdisk</a></li>
					    <li><a href="part-cfdisk-hu.htm#formating">Formatting after partitioning with cfdisk</a></li>
					</ul>
					</li>
		<li><a href="part-size-examp-hu.htm#part-example">Partitioning Basics &#8658;</a>
					<ul class="sub2-menu" id="sm6c">
					  <li><a href="part-size-examp-hu.htm#part-example">Partition Size Examples</a></li>
					  <li><a href="part-uuid-hu.htm#uuid">UUID, Partition Labelling and fstab</a></li>
					  <li><a href="part-cfdisk-hu.htm#disknames">Disk Naming in brief</a></li>
					</ul>
					</li>
		      </ul>
		</li>
<li  onmouseover="showHide( 7 );" onmouseout="startTime();" ><a href="hd-install-hu.htm">Installation options - HD, USB, VM</a>
		<ul class="sub-menu" id="sm7">
		  <li><a href="hd-install-hu.htm#Inst-prep">Install Preparation &#8658;</a>
					<ul class="sub2-menu" id="sm7a">
					  <li><a href="hd-install-hu.htm#Inst-prep">Install Preparation </a></li>
					  <li><a href="hd-install-hu.htm#Installation">Installing to your HD</a></li>
					  <li><a href="hd-install-hu.htm#first-hd-boot">First Boot Up</a></li>
					</ul>
					</li>
		<li><a href="hd-install-opts-hu.htm#fromiso">Booting fromiso &#8658;</a>
					<ul class="sub2-menu" id="sm7b">
					  <li><a href="hd-install-opts-hu.htm#fromiso">Booting fromiso - Overview</a></li>
					  <li><a href="hd-install-opts-hu.htm#fromiso-grub-leg">Booting 'fromiso' with grub-legacy</a></li>
					  <li><a href="hd-install-opts-hu.htm#grub2-fromiso">Booting 'fromiso' with Grub 2</a></li>
					  <li><a href="hd-install-opts-hu.htm#fromiso-persist">fromiso and persist</a></li>
					</ul>
					</li>
		<li><a href="hd-install-opts-hu.htm#usb-hd">Installing to USB drives &#8658;</a>
					<ul class="sub2-menu" id="sm7c">
					  <li><a href="hd-install-opts-hu.htm#usb-hd">Installing on a USB-HD - aptosid specific - aptosid-on-stick</a></li>
					  <li><a href="hd-ins-opts-oos-hu.htm#raw-usb">Writing aptosid to a USB/SSD stick with any Linux, MS Windows or Mac OS X system</a></li>
					</ul>
					</li>
		  <li><a href="nbdboot-hu.htm#nbd1">Booting aptosid over a network</a></li>
		  <li><a href="hd-install-vmopts-hu.htm#vm">Virtual Machine installation options</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 8 );" onmouseout="startTime();" ><a href="hw-dev-hw-dri-hu.htm">Graphic Cards, Monitors, Xorg &amp; Miscellaneous Drivers</a>
	<ul class="sub-menu" id="sm8">
		<li><a href="hw-dev-hw-dri-hu.htm#hd-ntfs3g">Writing on NTFS-partitions with ntfs-3g</a></li>
		<li><a href="hw-dev-mon-hu.htm#mon-res">Screen Resolution and Monitors  &#8658;</a>
					<ul class="sub2-menu" id="sm8a">
					  <li><a href="hw-dev-mon-hu.htm#mon-res">Screen Resolution and Monitors</a></li>
					  <li><a href="hw-dev-mon-hu.htm#xrandr">Dual Monitors and xrandr</a></li>
					  <li><a href="hw-dev-mon-hu.htm#mon-binary">Dual Monitors (using binaries)</a></li>
					</ul>
					</li>
		<li><a href="hw-dev-hw-dri-hu.htm#non-free-3d">Graphic card proprietry drivers &#8658;</a>
					<ul class="sub2-menu" id="sm8b">
					  <li><a href="hw-dev-hw-dri-hu.htm#non-free-3d">Binary, non-free drivers for Nvidia &amp; xorg.conf</a></li>
					  <li><a href="hw-dev-hw-dri-hu.htm#non-free-3d-2">non-free drivers for ATI, Radeon and others</a></li>
					</ul>
					</li>
			  <li><a href="hw-dev-hw-dri-hu.htm#non-free-firmware">Hardware needing non-free firmware drivers</a></li>
			  <li><a href="hw-dev-hw-dri-hu.htm#non-free">Adding non-free to Sources List</a></li>
			  <li><a href="hw-dev-hw-dri-hu.htm#native-nv-ati">FOSS xorg drivers for nVidia, ATI, Radeon, Intel &amp; xorg.conf</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 9 );" onmouseout="startTime();" ><a href="wm-kde-hu.htm">Window Managers</a>
		    <ul class="sub-menu" id="sm9">
			  <li><a href="wm-kde-hu.htm">Window Managers &#8658;</a>
					  <ul class="sub2-menu" id="sm9a">
					    <li><a href="wm-kde-hu.htm">Window Managers</a></li>
					    <li><a href="wm-xfce-hu.htm#xfce-notes">Useful Xfce extras</a></li>
					    <li><a href="wm-kde-hu.htm#install-add">Useful extra KDE Apps</a></li>
					    <li><a href="wm-kde-hu.htm#desk-freeze">Desktop Freezes</a></li>
					    <li><a href="wm-kde-hu.htm#kde-login">Cant login in KDE</a></li>
					    <li><a href="wm-kde-hu.htm#ch-th">Changing Themes</a></li>
					</ul>
					</li>
		      <li><a href="wm-kde-hu.htm#dm">Display Managers - dm</a></li>
		</ul>
		</li>
<li  onmouseover="showHide( 11 );" onmouseout="startTime();" ><a href="internet-connecting-hu.htm">Internet connecting, WiFi, LAN and Networks</a>
		    <ul class="sub-menu" id="sm11">
			<li><a href="lamp-apache-hu.htm">aptosid LAMP Stack &#8658;</a>
					<ul class="sub2-menu" id="sm11a">
					    <li><a href="lamp-apache-hu.htm#serv-apache">aptosid LAMP Stack</a></li>
					    <li><a href="lamp-apache-hu.htm#serv-ftp">FTP Clients</a></li>
					    <li><a href="lamp-apache-hu.htm#serv-sec">Security Protocols</a></li>
					    <li><a href="lamp-apache-hu.htm#serv-ssl">SSL</a></li>
					    <li><a href="lamp-sql-hu.htm#serv-mysql">MySQL Setup</a></li>
					    <li><a href="lamp-ppp-hu.htm#serv-php">PHP in Apache</a></li>
					    <li><a href="ntp-server-hu.htm#ntp-server">Timeserver Setup</a></li>
					</ul>
					</li>
		<li><a href="tor-privoxy-hu.htm#tor">Firewalls and Privacy &#8658;</a>
					<ul class="sub2-menu" id="sm11b">
					    <li><a href="tor-privoxy-hu.htm#tor">Tor</a></li>
					    <li><a href="tor-privoxy-hu.htm#privoxy">Privoxy</a></li>
					    <li><a href="internet-connecting-hu.htm#firewalls">Firewalls</a></li>
					</ul>
					</li>
		<li><a href="ssh-hu.htm#ssh-x">SSH and Samba &#8658;</a>
					<ul class="sub2-menu" id="sm11c">
						  <li><a href="samba-hu.htm#setup">Samba-Server Setup</a></li>
						  <li><a href="samba-hu.htm#configure">Configuring SAMBA (Windows)</a></li>
						  <li><a href="ssh-hu.htm#ssh-fs">SSH Remote Mounting</a></li>
						  <li><a href="ssh-hu.htm#ssh-x">X Window Apps via SSH</a></li>
						  <li><a href="ssh-hu.htm#ssh-f">GUI SSH with Konqueror</a></li>
						  <li><a href="ssh-hu.htm#ssh-w">SSH X-Forwarding from Windows-PC</a></li>
						  <li><a href="ssh-hu.htm#ssh">SSH and Security</a></li>
					</ul>
					</li>
		<li><a href="internet-connecting-hu.htm#netcardconfig">WIFI connections &#8658;</a>
						<ul class="sub2-menu" id="sm11d">
						    <li><a href="internet-connecting-hu.htm#netcardconfig">Getting Online - Ceni</a></li>
						    <li><a href="inet-wpagui-hu.htm#wpa-roaming-gui">WiFi - WPA_GUI</a></li>
						    <li><a href="inet-setup-hu.htm#net-set1">WiFi - Setting up for WiFi Roaming</a></li>
						    <li><a href="internet-connecting-wpa-hu.htm#wpa">WiFi - wpasupplicant</a></li>
						    <li><a href="inet-ifplug-hu.htm#hotswitch">Network switching between WiFi and Cable</a></li>
					</ul>
					</li>
		<li><a href="internet-connecting-hu.htm#netcardconfig">Wired Connections &#8658;</a>
						<ul class="sub2-menu" id="sm11e">
						    <li><a href="internet-connecting-hu.htm#dial-mod">56k Modems</a></li>
						    <li><a href="internet-connecting-hu.htm#netcardconfig">Getting Online - Ceni</a></li>
					</ul>
					</li>
				</ul>
			    </li>
<li  onmouseover="showHide( 12 );" onmouseout="startTime();" ><a href="sys-admin-apt-hu.htm">Package Management and dist-upgrade</a>
	<ul class="sub-menu" id="sm12">
		<li><a href="sys-admin-apt-hu.htm#apt-cook">APT Cookbook and Sources list &#8658;</a>
					<ul class="sub2-menu" id="sm12a">
					    <li><a href="sys-admin-apt-hu.htm#apt-cook">APT-Guide Cookbook and Sources list</a></li>
					    <li><a href="sys-admin-apt-hu.htm#apt-install">Installing a new package</a></li>
					    <li><a href="sys-admin-apt-hu.htm#apt-delete">Deleting a package</a></li>
					    <li><a href="sys-admin-apt-hu.htm#apt-downgrade">Package Hold and downgrading</a></li>
					    <li><a href="sys-admin-apt-hu.htm#apt-cache">Package searching with apt-cache</a></li>
					    <li><a href="sys-admin-apt-hu.htm#gui-pacsea">GUI Package searching</a></li>
					</ul>
				</li>
		<li><a href="sys-admin-kern-upg-hu.htm#kern-upgrade">Upgrading the kernel &#8658;</a>
					<ul class="sub2-menu" id="sm12b">
					    <li><a href="sys-admin-kern-upg-hu.htm#kern-remove">Removing Kernels</a></li>
					    <li><a href="sys-admin-kern-upg-hu.htm#kern-upgrade">Upgrading the kernel</a></li>
					    <li><a href="sys-admin-kern-upg-hu.htm#dmakms">Installing kernel modules dynamically with dmakms</a></li>
					</ul>
				</li>
		<li><a href="sys-admin-apt-hu.htm#apt-upgrade">Upgrade an Installed System -  dist-upgrade - Overview &#8658;</a>
					<ul class="sub2-menu" id="sm12c">
					    <li><a href="sys-admin-upgrade-hu.htm#live-cd-upgrade">Upgrading by Live-ISO</a></li>
					    <li><a href="sys-admin-apt-locarmirr-hu.htm#approx">dist-upgrade of multiple PCs on a LAN</a></li>
					    <li><a href="sys-admin-apt-hu.htm#apt-upgrade">Upgrade an Installed System -  dist-upgrade - Overview</a></li>
					    <li><a href="sys-admin-apt-hu.htm#du-st">Upgrade an Installed System -  dist-upgrade - The Steps</a></li>
					</ul>
				  </li>
			    </ul>
		</li>
<li  onmouseover="showHide( 13 );" onmouseout="startTime();" ><a href="sys-admin-gen-hu.htm">System Administration</a>
	<ul class="sub-menu" id="sm13">
		<li><a href="bios-freedos-hu.htm#bois-prep">Upgrading the BIOS with FreeDOS</a></li>
		<li><a href="vir-rkits-hu.htm#virus-rkits">Virus and Rootkit Scanners</a></li>
		<li><a href="hd-install-hu.htm#adduser">Adding Users and Passwords &#8658;</a>
					<ul class="sub2-menu" id="sm13a">
					    <li><a href="hd-install-hu.htm#adduser">Adding a new user</a></li>
					    <li><a href="sys-admin-gen-hu.htm#pw-lost">Lost root passwords, new passwords</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-gen-hu.htm#start-services">Services and init runlevels &#8658;</a>
					<ul class="sub2-menu" id="sm13b">
					    <li><a href="sys-admin-gen-hu.htm#start-services">Services enable/disable</a></li>
					    <li><a href="sys-admin-gen-hu.htm#init">aptosid runlevels - init</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-rsync-hu.htm#rsync">Backing up the system &#8658;</a>
					  <ul class="sub2-menu" id="sm13c">
					    <li><a href="sys-admin-rdiff-hu.htm#rdiff">Back-Up with rdiff</a></li>
					    <li><a href="sys-admin-rsync-hu.htm#rsync">Back-Up with rsync</a></li>
					    <li><a href="home-hu.htm#home-bu">Moving /home</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-gen-hu.htm#fonts">CUPS, Fonts and Sound &#8658;</a>
					  <ul class="sub2-menu" id="sm13d">
					     <li><a href="sys-admin-gen-hu.htm#fonts">Fonts</a></li>
					     <li><a href="sys-admin-gen-hu.htm#cups">CUPS - Printing System</a></li>
					     <li><a href="sys-admin-gen-hu.htm#sound">Sound Mixers</a></li>
					</ul>
					</li>
		<li><a href="sys-admin-grub2-hu.htm#grub2">Grub2 &#8658;</a>
					  <ul class="sub2-menu" id="sm13f">
					    <li><a href="sys-admin-grub2-hu.htm#chroot">Grub2 - Recovering Grub with chroot</a></li>
					    <li><a href="sys-admin-grub2-hu.htm#mbr-over-grub2">Grub2 - MBR Overwritten</a></li>
					    <li><a href="sys-admin-grub2-hu.htm#multi-os">Grub2 - Dual and Multibooting</a></li>
					    <li><a href="sys-admin-grub2-hu.htm#grub1-grub2">Grub2 -Upgrading from Grub1</a></li>
					    <li><a href="sys-admin-grub2-hu.htm#grub2">Grub2 - Overview</a></li>
					</ul>
					</li>
			</ul>
		</li>
	</ul>
<!-- menu ends here --> </div>
<div id="main-page">
		<div class="divider" id="grub2">
			<h2 id="top-header">GRUB 2</h2>
				<h6>Basic summary of GRUB 2:</h6>

					<ul>
							<li>A file called <span class="highlight-3">grub.cfg</span> controls the Grub Screen.</li>

							<li>grub.cfg is automatically generated by the scripts in <span class="highlight-3"> /etc/grub.d</span>.</li>

							<li>Partitions are numbered from 1 instead of 0 and drives are numbered from 0:
<pre>
Linux       grub2
/dev/sda1  (hd0,1)
/dev/sda2  (hd0,2)
/dev/sda3  (hd0,3)

/dev/sdb1  (hd1,1)
/dev/sdb2  (hd1,2)
/dev/sdb3  (hd1,3)
</pre>
							</li>

							<li>As the grub.cfg file is the 'result' file <span class="highlight-2">the grub.cfg file should never be altered manually. </span></li>

					 </ul>
		</div>
		<div class="divider" id="grub2-files">
					 <h4> The Grub 2 default config file</h4>
							<p>The <span class="highlight-3">/etc/default/grub</span> file contains the grub2 variable settings. For instance, timeout on menu, default entries in the menu to be activated, kernel parameters, the use of grub graphics and so forth.</p>

					 <h4> The Grub 2 script files</h4>
							<p><span class="highlight-3"> /etc/grub.d</span> files control the 'result' file called <span class="highlight-3"> grub.cfg</span>, which is found in <span class="highlight-3"> /boot/grub/</span>.</p>

							<p><span class="highlight-2">The grub.cfg file should never be altered manually. </span>All alterations are to be done with one or all of the following script files located in <span class="highlight-3"> /etc/grub.d</span>. os-prober should handle 90% of all cases:</p>
<pre>
00_header:
05_debian_theme: Sets background, text colors, themes
10_hurd: Locates Hurd kernels
10_linux: Locates Linux kernels based on results of the lsb_release command.
20_memtest86+: If the file /boot/memtest86+.bin exists, it is included in the boot menu.
30_os-prober: Searches for Linux and other OS's on all partitions; includes them in the boot menu.
40_custom: A template for adding custom boot menu entries for other Operating Systems.
60_fll-fromiso: A template for adding custom boot menu entries for fromiso to a USB-stick/SSD-card.
<span class="highlight-2">60_fll-fromiso is not to be altered use /etc/default/grub2-fll-fromiso
Read  <a href="hd-install-opts-en.htm#grub2-fromiso">Booting 'fromiso' with Grub 2</a></span>
</pre>
							<p>After an alteration is made, grub.cfg needs to know about the changes. In the case of aptosid kernel upgrades, the update command is automatically run. In the case of a manual alteration made by you as the system administrator to any of the above files, you need to run: </p>

<pre>
update-grub
</pre>

							<p><span class="highlight-3">The Debian Grub2 deb package is designed so that a manual alteration by you would be rarely needed.</span></p>

				  <h3>Editing Grub2 boot options via the edit screen</h3>
<div class="screenshot"><img src="../lib/images-common/images-grub2/grub2-e-1.JPG" title="Grub2-Edit" alt="Grub2-Edit" /></div>
							<p>If, for some reason, you need to make a temporary alteration to the boot options to a kernel highlighted in Grub2, press the letter <span class="highlight-2"> e </span> to edit the kernel options and by using the using arrow keys, navigate to the line that you wish to edit, then while still in the edit screen use <span class="highlight-3"> Ctrl+x </span> to boot the computer with your edited options.</p>

							<p>For example, to go directly to run level 3, add <span class="highlight-3">3</span> to the end <span class="highlight-3"> linux /boot/vmlinuz</span> line.</p>

							<p>The edits you make via the edit screen and are not permanent. To make  permanent changes, you need to edit the appropriate files. See <a href="sys-admin-grub2-en.htm#grub2-files">Grub 2 files</a>.</p>

	      </div>
		<div class="divider" id="multi-os">
				<h2>Dual and multi booting with Grub 2</h2>

							<p>As Grub2 is modular in configuration, it allows a simple command to seek out any newly installed operating systems and if one is found, it tries to implement the change to update the menu.cfg. The simple command is:</p>
<pre>
update-grub
</pre>
							<p>Should you have a need to add a custom entry to menu.cfg or if the 30_os-prober fails to write to grub.cfg with chainloader menus use your favourite text editor to make the amendments to <span class="highlight-3"> /etc/grub.d/40_custom</span>.</p>

							<p>Examples of customising the 40_custom  file:</p>
<pre>
menuentry "second mbr"{
set root=(hd1)
chainloader +1
}
</pre>

<pre>
menuentry "second partition"{
set root=(hd0,2)
chainloader +1
}
</pre>
							<p>Then after you have made your changes run:</p>
<pre>
update-grub
</pre>
							<p>Should it complain that does not know the grub device of a disk, it means that the devicemap must be regenerated.</p>

							<p><span class="highlight-3">Ensure that you choose the partition not the MBR when installing the other operating system:</span></p>

<pre>
grub-mkdevicemap --no-floppy
update-grub
</pre>
							<p>Warnings can be safely ignored.</p>

							<p>Should you make a mistake, the update will probably overwrite your MBR and you will need to fix it with <a href="sys-admin-grub2-en.htm#mbr-over-grub2">Grub2 - MBR Overwritten</a>.</p>
</div>
	<div class="divider" id="mbr-over-grub2">

					<h2>To only re-write grub2 to MBR from the hard drive:</h2>

<pre>
/usr/sbin/grub-install --recheck --no-floppy /dev/sda
</pre>
						<p>This line may need to be run more than once, until its convinced you really mean it.</p>

		<h2>MBR Bootsector overwritten by Windows, a corrupted and /or to recover Grub2</h2>
							<p><span class="highlight-2">NOTE: to restore a Grub2 bootloader you need to have an aptosid.iso.</span> <a href="sys-admin-grub2-en.htm#chroot">Alternatively use chroot with any live.iso</a>.</p>

							<p> To rewrite the grub2 to the MBR and/or to recover grub 2 in general, you will need boot up a <span class="highlight-3">aptosid.iso</span>:</p>
						<ol>
							<li>To identify and confirm your partitions (e.g. [h,s]d[a..]X) all the following actions need root privileges, so to get root (#):
<pre>
$ su
</pre>
							</li>
							<li>When in root type in:
<pre>
fdisk -l
cat /etc/fstab
</pre>
							This is to get the correct names.
							</li>
							<li>When you have acertained the correct partition, create the mount point:
<pre>
mkdir -p /media/[hdxx,sdxx,diskx]
</pre>
							</li>
							<li>Mount it:
<pre>
mount /dev/xdxx /media/xdxx
</pre>
							</li>

							<li>Now rewrite Grub to MBR of the first harddisk (generic):
<pre>
/usr/sbin/grub-install --recheck --no-floppy --root-directory=/media/xdxx /dev/sda
</pre>
							</li>
						</ol>
	      </div>
		<div class="divider" id="chroot">
		      <h2>Using chroot to recover an overwritten or corrupted Grub in the MBR</h2>

							<p>To recover Grub, if it has been overwritten or corrupted in the MBR, set up a <span class="highlight-3">chroot</span> environment. <span class="highlight-3">Any live.iso will suffice as the chroot takes you to your hard disk installed system so you can restore the appropriate grub version, grub1 (grub-legacy) or grub2.</span></p>

							<p>Boot up a live aptosid.iso that is appropriate for your system (32 or 64 bit CD, DVD, USB stick or an SSD card) and open the konsole. Type in <span class="highlight-3">su</span> and press enter to give you root permissions.</p>

							<p>Using <span class="highlight-3">fdisk -l or blkid</span>, ascertain which partition is the boot partition and get the correct names. If you prefer a GUI use <span class="highlight-3">Gparted</span>:</p>
<pre>
blkid
</pre>
							<p>and to check that fstab matches the output of the blkid:</p>
<pre>
cat /etc/fstab
</pre>
							<p>Let's assume your root filesystem is on <span class="highlight-3">/dev/sda2</span></p>
<pre>
mkdir /mnt/aptosid-chroot
mount /dev/sda2 /mnt/aptosid-chroot
</pre>

							<p>Next, you need to mount /proc, /run, /dev and /sys as follows:</p>
<pre>
mount --bind /proc /mnt/aptosid-chroot/proc
mount --bind /run /mnt/aptosid-chroot/run
mount --bind /sys /mnt/aptosid-chroot/sys
mount --bind /dev /mnt/aptosid-chroot/dev
mount --bind /dev/pts /mnt/aptosid-chroot/dev/pts
</pre>
							<p>If you boot using an EFI system partition you will also need to mount it. Assuming this is /dev/sda1:</p>
<pre>
mount /dev/sda1 /mnt/aptosid-chroot/boot/efi
</pre>

							<p>Your chroot environment is now set up, access it with:</p>
<pre>
chroot /mnt/aptosid-chroot /bin/bash
</pre>

							<p>Now you are able to use apt's local cache or alter files that you need to fix as if you were properly booted to the OS, in this case to fix Grub back onto the MBR.</p>

							<p><span class="highlight-3">To restore Grub 2</span></p>
<pre>
apt-get install --reinstall grub-pc
</pre>
							<p>To ensure that grub was installed to the correct disk or partition, run:</p>
<pre>
dpkg-reconfigure grub-pc
</pre>
							<p><span class="highlight-3">To restore Grub 2 EFI</span></p>
<pre>
apt-get install --reinstall grub-efi-amd64
</pre>
							<p><span class="highlight-3">To restore Grub 1 (grub-legacy)</span></p>
<pre>
apt-get install --reinstall grub-legacy
</pre>
							<p>Follow the installers instructions.</p>

							<p>To release the chroot:</p>
<pre>
Ctrl+d
</pre>
							<p>Reboot your PC.</p>





	</div>
	<div id="rev">Page last revised 29/06/2013 0850 UTC</div>

</div>
</body>
</html>
